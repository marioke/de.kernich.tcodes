<mvc:View
    controllerName="de.kernich.tcode.controller.Main"
    displayBlock="true"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    core:require="{
		formatter: 'de/kernich/tcode/model/formatter'
	}"
>
    <Page
        id="page"
        showFooter="{= ${local>/selectedTag} === 'CUSTOM' }"
    >
        <customHeader>
            <OverflowToolbar>
                <core:Icon
                    src="sap-icon://sap-ui5"
                    size="3rem"
                />
                <Title text="SAP T-Code search" />
                <ToolbarSpacer />
                <SearchField
                    placeholder="Search for transaction..."
                    liveChange=".onSearch"
                    width="500px"
                    id="IdSearchField"
                />
                <ToolbarSpacer />
                <Button
                    icon="sap-icon://action-settings"
                    press=".onOpenSettings"
                    tooltip="Open settings"
                    text="Settings"
                    type="Transparent"
                />
                <ToolbarSeparator />
                <Button
                    icon="img/github-brands.svg"
                    text="View on GitHub"
                    press="window.open('https://github.com/marioke/de.kernich.tcode', '_blank')"
                    tooltip="GitHub Repository"
                />
                <Button
                    icon="img/linkedin-brands.svg"
                    text="Mario Kernich"
                    press="window.open('https://www.linkedin.com/in/mario-kernich/', '_blank')"
                    tooltip="GitHub Repository"
                />
            </OverflowToolbar>
        </customHeader>
        <VBox>
            <IconTabBar
                select=".onIconTabBarSelect"
                applyContentPadding="false"
                headerMode="Inline"
                selectedKey="{local>/selectedTag}"
            >
                <items>
                    <IconTabFilter
                        key="ALL"
                        text="All"
                        icon="sap-icon://multiselect-all"
                    />
                    <IconTabFilter
                        key="GENERAL"
                        text="GENERAL"
                        icon="sap-icon://world"
                    />
                    <IconTabFilter
                        key="UI5"
                        text="UI5/FIORI"
                        icon="sap-icon://sap-ui5"
                    />
                    <IconTabFilter
                        key="ABAP"
                        text="ABAP"
                        icon="sap-icon://program-triangles"
                    />
                    <IconTabFilter
                        key="EWM"
                        text="SAP EWM"
                        icon="sap-icon://program-triangles"
                    />
                    <IconTabFilter
                        key="ERP"
                        text="SAP ERP"
                        icon="sap-icon://program-triangles"
                    />
                    <IconTabFilter
                        key="CUSTOM"
                        text="CUSTOM"
                        icon="sap-icon://program-triangles"
                    />
                </items>
            </IconTabBar>
            <Table
                id="transactionTable"
                items="{ path: '/' }"
                mode="None"
                selectionChange=".onSelectionChange"
                itemPress=".onRowPress"
            >
                <contextMenu>
                    <Menu>
                        <MenuItem
                            text="Edit"
                            icon="sap-icon://edit"
                            press=".onEditTransaction"
                            visible="{= ${tags}.indexOf('CUSTOM') !== -1 }"
                        />
                    </Menu>
                </contextMenu>
                <columns>
                    <Column width="200px">
                        <Text text="Transaction code" />
                    </Column>
                    <Column>
                        <Text text="Title" />
                    </Column>
                    <Column>
                        <Text text="Description" />
                    </Column>
                    <Column hAlign="Right" />
                </columns>
                <items>
                    <ColumnListItem
                        type="Active"
                        press=".onRowPress"
                    >
                        <cells>
                            <Text text="{= ${tcode}.toUpperCase() }" />
                            <Text text="{ path: 'title' }" />
                            <Text text="{ path: 'description' }" />
                            <HBox justifyContent="End">
                                <Button
                                    icon="{= ${favorite} ? 'sap-icon://favorite' : 'sap-icon://unfavorite' }"
                                    press=".onToggleFavorite"
                                    type="Transparent"
                                />
                            </HBox>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </VBox>
        <footer>
            <OverflowToolbar>
                <Button
                    id="deleteButton"
                    icon="sap-icon://delete"
                    press=".onDeleteTransaction"
                    tooltip="Delete selected transactions"
                    text="Delete"
                    type="Reject"
                    enabled="false"
                />
                <Button
                    icon="sap-icon://add-document"
                    press=".onAddTransaction"
                    tooltip="Add new transaction"
                    text="New"
                    type="Ghost"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
